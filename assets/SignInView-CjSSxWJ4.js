import{_ as c,r as u,c as g,d as n,a as t,w as d,v as p,e as m,f as _,b as i,g as x,o as k,u as y,h as I}from"./index-DbV5Pvur.js";import{_ as V}from"./ToastNotification-BQqKk-NZ.js";const E={class:"mx-auto mt-3 text-center container"},N={class:"form-floating mb-3"},T={class:"form-floating mb-3"},$={class:"text-center"},B={__name:"SignInView",setup(S){const r=u(null),f="https://mumuapi.zeabur.app/api",v=y(),e=u({email:"",password:""}),w=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),b=async()=>{var a,s;try{if(!w(e.value.email)){r.value.showErrorToast("請輸入有效的電子郵件地址");return}const o=await I.post(`${f}/user/sign_in`,e.value);document.cookie=`tokenName=${o.data.token}`,v.push({name:"home"})}catch(o){r.value.showErrorToast(((s=(a=o.response)==null?void 0:a.data)==null?void 0:s.message)||"登入失敗，請稍後再試")}};return(a,s)=>{const o=x("router-link");return k(),g("div",E,[n(V,{ref_key:"toast",ref:r},null,512),s[9]||(s[9]=t("h1",{class:"fw-bold mb-4"},"登入",-1)),t("form",{class:"",onSubmit:_(b,["prevent"])},[t("fieldset",null,[s[5]||(s[5]=t("legend",{class:"visually-hidden"},"登入表單",-1)),t("div",N,[d(t("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>e.value.email=l),type:"email",class:"form-control",id:"floatingInput",placeholder:"電子郵件","aria-label":"輸入電子郵件",required:"",autocomplete:"email"},null,512),[[p,e.value.email]]),s[2]||(s[2]=t("label",{for:"floatingInput"},"電子郵件",-1))]),t("div",T,[d(t("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>e.value.password=l),type:"password",class:"form-control",id:"floatingPassword",placeholder:"密碼","aria-label":"輸入密碼",required:"",autocomplete:"current-password"},null,512),[[p,e.value.password]]),s[3]||(s[3]=t("label",{for:"floatingPassword"},"密碼",-1))]),t("p",null,[n(o,{to:"/users/forgot-password"},{default:m(()=>s[4]||(s[4]=[i("忘記密碼？")])),_:1})]),s[6]||(s[6]=t("button",{type:"submit",class:"btn btn-primary w-100 mb-4"},"登入",-1))])],32),t("p",$,[s[8]||(s[8]=i(" 還不是會員？ ")),n(o,{to:"/users/signUp"},{default:m(()=>s[7]||(s[7]=[i("註冊會員")])),_:1})])])}}},C=c(B,[["__scopeId","data-v-bfc5e853"]]);export{C as default};
