import{r as n,c as i,a as b,b as s,F as u,f as p,w as _,v as h,h as y,o as c}from"./index-ehUiTKS-.js";import{_ as w}from"./ToastNotification-Ck8PgkN6.js";const g={class:"row mb-3"},T={class:"col"},k={class:"col"},x=["disabled"],C={class:"row"},F={class:"col-8"},L={__name:"uploadView",setup(V){const o=n(null),d=n(null),t=n(""),l=n(!1),v=a=>{d.value=a.target.files[0]},m=async()=>{try{l.value=!0;const a=new FormData;a.append("file",d.value);const e=await y.post("undefined/files/upload",a,{headers:{"Content-Type":"multipart/form-data"}}),r=e.data.message||"檔案上傳成功";t.value=e.data.imageURL,o.value.showSuccessToast(r)}catch(a){o.value.showErrorToast(a.response.data.message||"檔案上傳失敗")}finally{l.value=!1}},f=()=>{if(!t.value){o.value.showErrorToast("無可複製的網址！");return}navigator.clipboard.writeText(t.value).then(()=>{o.value.showSuccessToast("網址已成功複製！")}).catch(()=>{o.value.showErrorToast("複製失敗，請手動複製！")})};return(a,e)=>(c(),i("div",null,[b(w,{ref_key:"toast",ref:o},null,512),s("div",g,[s("div",T,[s("input",{class:"form-control",type:"file",name:"file",required:"",onChange:v},null,32)]),s("div",k,[s("button",{onClick:m,type:"button",class:"btn btn-primary",disabled:l.value},[l.value?(c(),i(u,{key:0},[e[1]||(e[1]=s("div",{class:"spinner-border spinner-border-sm",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),e[2]||(e[2]=p(" 上傳中... "))],64)):(c(),i(u,{key:1},[p(" 上傳 ")],64))],8,x)])]),s("div",C,[s("div",F,[e[3]||(e[3]=s("label",{class:"form-label"},"圖片網址:",-1)),_(s("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=r=>t.value=r)},null,512),[[h,t.value]]),s("button",{onClick:f,class:"btn btn-secondary mt-2"},"複製網址")])])]))}};export{L as default};
